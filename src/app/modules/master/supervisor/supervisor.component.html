<app-master-sub-header></app-master-sub-header>
<div *ngIf="showTabs" class="modal-overlay">
    <div class="modal-dialog " (click)="preventClose($event)" style="position: relative;">
  
      <button mat-icon-button (click)="toggleTabs()" style="position: absolute; top:-20px;right: -20px;cursor: pointer;">
        <i class="far fa-times-circle " style="background-color:orange;
          border-radius: 14px;"></i>
      </button>
  
      <form class="modal-content" style="border: 0px solid green; position: relative; border-radius: 20px;  height:  330px ;
        width: 500px;">
        <form [formGroup]="validationForm" (ngSubmit)="onSubmit(validationForm)">
          <button mat-icon-button (click)="toggleTabs()"
            style="position: absolute; top:-20px;right: -20px;cursor: pointer;z-index: 30;">
            <i class="far fa-times-circle " style="background-color:orange;
            border-radius: 14px;"></i>
          </button>
  
          <div class="model-body" style="margin-left: 40px; border-bottom: 0px solid black;">
            <div style="position:absolute;top:20px;left:20px; width: 95%; ">
              <div style=" border-bottom: 2px solid lightgray ;width: 95%; ">
                <h2 style="border: 0px solid;margin: 0px 0px 7px 0px;color: black;"><b>Add Supervisor</b></h2>
              </div>
  
              <div style="display: flex; flex-wrap: wrap; gap:4%;border: 0px solid;padding-top: 15px;margin-left: 10%;"
                class="commentresp">
                <div style="width: 87%; " class="row">
                  <mdb-form-control>
                    <select mdbInput mdbValidate id="departmentId" class="form-control"
                      aria-labelledby="dropdownMenuLink" [(ngModel)]="deptInputVal" (change)="handleDeptInput($event)"
                      [required]="true" formControlName="departmentId">
                      <option value="" disabled selected hidden></option>
                      <option *ngFor="let department of departmentList" [value]="department.id">{{ department.name }}
                      </option>
                    </select>
                    <label mdbLabel class="form-label" for="departmentId">Department <span
                        class="text-danger">*</span></label>
                    <i class="fas fa-caret-down"
                      style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
                  </mdb-form-control>
                  <mdb-form-control style="margin-top: 10px;">
                    <select mdbInput mdbValidate id="desginationId" class="form-control"
                      aria-labelledby="dropdownMenuLink" [required]="true" formControlName="desginationId">
                      <option value="" disabled selected hidden></option>
                      <option *ngFor="let designation of designationList" [value]="designation.id">{{ designation.name }}</option>
                    </select>
                    <label mdbLabel class="form-label" for="desginationId">Designation <span
                        class="text-danger">*</span></label>
                    <i class="fas fa-caret-down"
                      style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
                  </mdb-form-control>
                  <mdb-form-control style="margin-top: 10px;">
                    <select mdbValidate mdbInput id="superVisorName" class="form-control"
                      aria-labelledby="dropdownMenuLink" formControlName="superVisorName" required>
                      <option [value]="" disabled selected hidden></option>
                      <option *ngFor="let option of EmployeeOptions" [value]="option.value">{{ option.name }}</option>
                    </select>
                    <label mdbLabel class="form-label" for="superVisorName">Supervisor Name&nbsp;<span
                        class="text-danger">*</span></label>
                    <i class="fas fa-caret-down"
                      style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px; pointer-events:none"></i>
                  </mdb-form-control>
                </div>
              </div>
              <div style="border-bottom: 2px solid lightgray; padding-bottom: 20px;"></div>
              <br>
              <div class="mycontainer">
                <div class="req">
                  <span class="text-danger req">*</span> Required
                </div>
                <div style="text-align: right;">
                  <button type="button" class="btn btn-outline-primary btn-rounded cancel-button" data-mdb-ripple-init
                    (click)="toggleTabs()" data-mdb-ripple-color="dark">Cancel</button>
                </div>
                <div class="sub">
                  <button type="submit" class="btn btn-primary btn-rounded" data-mdb-ripple-init>Submit</button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </form>
    </div>
  </div>
  
  <!-- ///////////////Edit Popup////////////////// -->
  
  <div *ngIf="showEdits" class="modal-overlay">
    <div class="modal-dialog " (click)="preventClose($event)" style="position: relative;">
  
      <button mat-icon-button (click)="closeFunction()"
        style="position: absolute; top:-20px;right: -20px;cursor: pointer;">
        <i class="far fa-times-circle " style="background-color:orange;
          border-radius: 14px;"></i>
      </button>
  
      <form class="modal-content" style="border: 0px solid green; position: relative; border-radius: 20px;  height:  320px ;
        width: 500px;">
        <button mat-icon-button (click)="closeFunction()"
          style="position: absolute; top:-20px;right: -20px;cursor: pointer;z-index: 30;">
          <i class="far fa-times-circle " style="background-color:orange;
            border-radius: 14px;"></i>
        </button>
  
        <div class="model-body" style="margin-left: 40px; border-bottom: 0px solid black;">
          <div style="position:absolute;top:20px;left:20px; width: 95%; ">
            <div style=" border-bottom: 2px solid lightgray ;width: 95%; ">
              <h2 style="border: 0px solid;margin: 0px 0px 7px 0px;color: black;"><b>Edit Supervisor </b></h2>
            </div>
  
            <div style="display: flex; flex-wrap: wrap; gap:4%;border: 0px solid;padding-top: 15px;margin-left: 10%;"
              class="commentresp">
              <div style="width: 87%;" class="row">
                <mdb-form-control>
                  <select mdbInput mdbValidate id="departmentId" class="form-control" aria-labelledby="dropdownMenuLink"
                    [(ngModel)]="deptInputVal" (change)="handleDeptInput($event)" [required]="true"
                    formControlName="departmentId">
                    <option value="" disabled selected hidden></option>
                    <option *ngFor="let department of departmentList" [value]="department.id">{{ department.name }}</option>
                  </select>
                  <label mdbLabel class="form-label" for="departmentId">Department <span
                      class="text-danger">*</span></label>
                  <i class="fas fa-caret-down"
                    style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
                </mdb-form-control>
  
                <mdb-form-control style="margin-top: 10px;">
                  <select mdbInput mdbValidate id="desginationId" class="form-control" aria-labelledby="dropdownMenuLink"
                    [required]="true" formControlName="desginationId">
                    <option value="" disabled selected hidden></option>
                    <option *ngFor="let designation of designationList" [value]="designation.id">{{ designation.name }}</option>
                  </select>
                  <label mdbLabel class="form-label" for="desginationId">Designation <span
                      class="text-danger">*</span></label>
                  <i class="fas fa-caret-down"
                    style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
                </mdb-form-control>
                <mdb-form-control style="margin-top: 10px;">
                  <select mdbValidate mdbInput id="superVisorName" class="form-control" aria-labelledby="dropdownMenuLink"
                    formControlName="superVisorName" required>
                    <option [value]="" disabled selected hidden></option>
                    <option *ngFor="let option of EmployeeOptions" [value]="option.value">{{ option.name }}</option>
                  </select>
                  <label mdbLabel class="form-label" for="superVisorName">Supervisor Name&nbsp;<span
                      class="text-danger">*</span></label>
                  <i class="fas fa-caret-down"
                    style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px; pointer-events:none"></i>
                </mdb-form-control>
              </div>
            </div>
            <br>
            <div style="border-bottom: 2px solid lightgray; padding-bottom: 20px;"></div>
            <br>
            <div class="mycontainer">
              <div class="req">
                <span class="text-danger req">*</span> Required
              </div>
              <div style="text-align: right;">
                <button type="button" class="btn btn-outline-primary btn-rounded cancel-button" data-mdb-ripple-init
                  (click)="closeFunction()" data-mdb-ripple-color="dark">Cancel</button>
              </div>
              <div class="sub">
                <button type="submit" class="btn btn-primary btn-rounded" data-mdb-ripple-init
                  (click)="onSubmitEdit()">Submit</button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  
  <div class="container-fluid">
    <div class="navbar2 mt-2">
      <div>
        <h2>Supervisor</h2>
      </div>
      <mat-form-field style="margin-left: 20px; width: 180px; margin-right: 7px;">
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Search Here...." #input>
      </mat-form-field>
    </div>
    <div class="round-button">
      <button mat-fab extended (click)="toggleTabs()" matTooltip="Add Supervisor"
        aria-label="Button that displays a tooltip in various positions" color="warn">
        <i class="fas fa-plus fa-2x" style="color: rgba(10, 253, 253, 0.773);"></i>
      </button>
    </div>
    <div class="table-container mat-elevation-z8 ">
      <table mat-table [dataSource]="dataSource" matSort>
        <!-- Checkbox Column -->
        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef class="actionheader" style="width: 50px">
            <mat-checkbox (change)="$event ? toggleAllRows() : null" [checked]="selection.hasValue() && isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row" style="width: 50px">
            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
              [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
            </mat-checkbox>
          </td>
        </ng-container>
        <ng-container matColumnDef="superVisorId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Id </th>
          <td mat-cell *matCellDef="let row"> {{ row.superVisorId }} </td>
        </ng-container>
  
        <ng-container matColumnDef="departmentId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Department Id </th>
          <td mat-cell *matCellDef="let row"> {{ row.departmentId }} </td>
        </ng-container>
  
        <ng-container matColumnDef="desginationId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Designation Id </th>
          <td mat-cell *matCellDef="let row"> {{ row.desginationId }} </td>
        </ng-container>
        <ng-container matColumnDef="superVisorName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Supervisor Name </th>
          <td mat-cell *matCellDef="let row"> {{ row.superVisorName }} </td>
        </ng-container>
        <ng-container matColumnDef="empRegId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Employee Id </th>
          <td mat-cell *matCellDef="let row"> {{ row.empRegId }} </td>
        </ng-container>
  
        <ng-container matColumnDef="createdBy">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Created By </th>
          <td mat-cell *matCellDef="let row"> {{ row.createdBy }} </td>
        </ng-container>
  
        <ng-container matColumnDef="createdOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Created On </th>
          <td mat-cell *matCellDef="let row"> {{ row.createdOn | date: 'mediumDate'}} </td>
        </ng-container>
  
        <ng-container matColumnDef="updatedBy">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Updated By </th>
          <td mat-cell *matCellDef="let row"> {{ row.updatedBy }} </td>
        </ng-container>
  
        <ng-container matColumnDef="updatedOn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Updated On </th>
          <td mat-cell *matCellDef="let row"> {{ row.updatedOn | date: 'mediumDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="isActive">
          <th mat-header-cell *matHeaderCellDef> Active </th>
          <td mat-cell *matCellDef="let row">
            <span *ngIf="row.isActive" class="badge badge-success">True</span>
            <span *ngIf="!row.isActive" class="badge rounded-pill badge-danger">False</span>
          </td>
        </ng-container>
  
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="actionheader"> Actions </th>
          <td mat-cell *matCellDef="let row" class="action-cell">
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Toggle menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="toggleEdit(row.desigId)"><i class="fa fa-pencil m-r-5 p-2"></i>
                Edit</button>
              <button mat-menu-item ><i
                  class="fa-regular fa-trash-can m-r-5 p-2"></i>Delete</button>
            </mat-menu>
          </td>
          <td mat-cell></td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="8">No data found "{{ input.value }}"</td>
        </tr>
      </table>
    </div>
    <mat-paginator class="paginator" [pageSizeOptions]="[7, 10, 25, 100]"
      aria-label="Select page of users"></mat-paginator>
  </div>